<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Deployment/Infrastructure/upi_install" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">UPI Installation Instructions | IBM Client Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ibm-client-engineering.github.io/solution-wxai-aws/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ibm-client-engineering.github.io/solution-wxai-aws/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ibm-client-engineering.github.io/solution-wxai-aws/Deployment/Infrastructure/upi_install"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="ibm client engineering, open solutions library,  filenet, eks, aws, cp4ba, filenet on aws eks"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="UPI Installation Instructions | IBM Client Engineering"><meta data-rh="true" name="description" content="Prepare the Bastion Node"><meta data-rh="true" property="og:description" content="Prepare the Bastion Node"><link data-rh="true" rel="icon" href="/solution-wxai-aws/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ibm-client-engineering.github.io/solution-wxai-aws/Deployment/Infrastructure/upi_install"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-wxai-aws/Deployment/Infrastructure/upi_install" hreflang="en"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-wxai-aws/Deployment/Infrastructure/upi_install" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/solution-wxai-aws/blog/rss.xml" title="IBM Client Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/solution-wxai-aws/blog/atom.xml" title="IBM Client Engineering Atom Feed">






<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GB0XWXF3GE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GB0XWXF3GE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/solution-wxai-aws/assets/css/styles.22067fdf.css">
<script src="/solution-wxai-aws/assets/js/runtime~main.55a9f48a.js" defer="defer"></script>
<script src="/solution-wxai-aws/assets/js/main.944580c6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/solution-wxai-aws/"><div class="navbar__logo"><img src="/solution-wxai-aws/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="200" width="200"><img src="/solution-wxai-aws/img/logo-dark.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="200" width="200"></div><b class="navbar__title text--truncate">| IBM Solution Document for watsonx.ai on AWS</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/solution-wxai-aws/">Flight Path</a><a class="navbar__item navbar__link" href="/solution-wxai-aws/blog">Flight Logs</a><a href="https://github.com/ibm-client-engineering/solution-wxai-aws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-wxai-aws/">watsonx.ai on AWS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-wxai-aws/gettingstarted">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/GettingStarted/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/GettingStarted/prerequisites">Prerequisites</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/solution-wxai-aws/deployment">Deployment</a><button aria-label="Collapse sidebar category &#x27;Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/solution-wxai-aws/infrastructure">Infrastructure</a><button aria-label="Collapse sidebar category &#x27;Infrastructure&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/Deployment/Infrastructure/preparation">Preparation Steps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/solution-wxai-aws/Deployment/Infrastructure/upi_install">UPI Installation Instructions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/solution-wxai-aws/software">Software</a><button aria-label="Collapse sidebar category &#x27;Software&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/Deployment/Software/CP4D">Cloud Pak for Data Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/Deployment/Software/WXAI">Watsonx ai installation</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-wxai-aws/use-cases">Use Cases</a><button aria-label="Collapse sidebar category &#x27;Use Cases&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/Use-Cases/use-cases">RAG Use Cases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-wxai-aws/transition">Transition</a><button aria-label="Collapse sidebar category &#x27;Transition&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-wxai-aws/Transition/lessons">Lessons Learned</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/solution-wxai-aws/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/solution-wxai-aws/deployment"><span itemprop="name">Deployment</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/solution-wxai-aws/infrastructure"><span itemprop="name">Infrastructure</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">UPI Installation Instructions</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>UPI Installation Instructions</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-the-bastion-node">Prepare the Bastion Node<a href="#prepare-the-bastion-node" class="hash-link" aria-label="Direct link to Prepare the Bastion Node" title="Direct link to Prepare the Bastion Node">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-os-and-install-additional-tools">Update the OS and install additional tools<a href="#update-the-os-and-install-additional-tools" class="hash-link" aria-label="Direct link to Update the OS and install additional tools" title="Direct link to Update the OS and install additional tools">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo yum update -y; sudo yum install git -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="clone-the-repository-to-the-bootnode">Clone the repository to the bootnode.<a href="#clone-the-repository-to-the-bootnode" class="hash-link" aria-label="Direct link to Clone the repository to the bootnode." title="Direct link to Clone the repository to the bootnode.">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">git clone https://github.com/ibm-client-engineering/solution-wxai-aws</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="run-setup_bastion-script">Run &#x27;setup_bastion&#x27; script<a href="#run-setup_bastion-script" class="hash-link" aria-label="Direct link to Run &#x27;setup_bastion&#x27; script" title="Direct link to Run &#x27;setup_bastion&#x27; script">​</a></h4>
<p>Run the &#x27;setup_bastion&#x27; script which will install additional tools, and configure an HTTP server to host the Bootstrap ignition file.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">cd $HOME/aws-openshift410-cloudformation-noIAM-noR53/utils</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">./setup_bastion.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="change-the-bootnode-hostname-to-registrydomain">Change the bootnode hostname to &#x27;registry.$DOMAIN&#x27;<a href="#change-the-bootnode-hostname-to-registrydomain" class="hash-link" aria-label="Direct link to Change the bootnode hostname to &#x27;registry.$DOMAIN&#x27;" title="Direct link to Change the bootnode hostname to &#x27;registry.$DOMAIN&#x27;">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo hostnamectl set-hostname registry.$DOMAIN.com</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sudo reboot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-services">Setup Services<a href="#setup-services" class="hash-link" aria-label="Direct link to Setup Services" title="Direct link to Setup Services">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-registry">Create Registry<a href="#create-registry" class="hash-link" aria-label="Direct link to Create Registry" title="Direct link to Create Registry">​</a></h4>
<p>Create a new directory for the registry, select a port (suggested port: 5000), a username and a password.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo mkdir -p /ibm/</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sudo chown -R ec2-user:ec2-user /ibm/</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">./create_registry.sh &lt;registry_directory&gt; &lt;port&gt; &lt;userid&gt; &lt;password&gt; &lt;local_dir_install&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./create_registry.sh /ibm 5000 wxai CeFsm2024 /home/ec2-user/openshift-upi-master/aws-openshift410-cloudformation-noIAM-noR53</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-registry">Start the registry<a href="#start-the-registry" class="hash-link" aria-label="Direct link to Start the registry" title="Direct link to Start the registry">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./start_registry.sh &lt;registry_directory&gt; &lt;port&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./start_registry.sh /ibm 5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-your-local-registry-login-details">Add your local registry login details<a href="#add-your-local-registry-login-details" class="hash-link" aria-label="Direct link to Add your local registry login details" title="Direct link to Add your local registry login details">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">mkdir -p /ibm/security/auth/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">echo -n &#x27;&lt;user_name&gt;:&lt;password&gt;&#x27; | base64 -w0 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-your-details-to-the-authjson">Add your details to the auth.json<a href="#add-your-details-to-the-authjson" class="hash-link" aria-label="Direct link to Add your details to the auth.json" title="Direct link to Add your details to the auth.json">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">{</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  &quot;auths&quot;: {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;&lt;mirror_registry&gt;&quot;: { </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      &quot;auth&quot;: &quot;&lt;credentials&gt;&quot;, </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      &quot;email&quot;: &quot;you@example.com&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;mirror_registry&gt; - the URL of the registry including the port</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;credentials&gt; - the output from &quot;echo -n &#x27;&lt;user_name&gt;:&lt;password&gt;&#x27; | base64 -w0 &quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Confirm the registry is accessible:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">podman login &lt;Registry_URL&gt; --authfile /ibm/security/auth/auth.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-local-and-internal-registries">Setup Local and Internal registries<a href="#setup-local-and-internal-registries" class="hash-link" aria-label="Direct link to Setup Local and Internal registries" title="Direct link to Setup Local and Internal registries">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="load-the-registry-with-the-ocp-files">Load the registry with the OCP files<a href="#load-the-registry-with-the-ocp-files" class="hash-link" aria-label="Direct link to Load the registry with the OCP files" title="Direct link to Load the registry with the OCP files">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./load_ocp.sh &lt;ocprelease&gt; &lt;registryip:port&gt; &lt;contentpath&gt; &lt;authfile&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./load_ocp.sh 4.14.9 registry.cpdu8vscs.ibmworkshops.com:5000 /ibm/openshift-4.14.9/export /ibm/openshift/auth.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">export OCP_RELEASE=&quot;4.14.9&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export LOCAL_REGISTRY=&quot;registry.cpdu8vscs.ibmworkshops.com:5000&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export LOCAL_REPOSITORY=&quot;openshift&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export PRODUCT_REPO=&quot;openshift-release-dev&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export RELEASE_NAME=&quot;ocp-release&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export ARCHITECTURE=&quot;x86_64&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export REMOVABLE_MEDIA_PATH=&quot;/ibm/ocp-images&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export LOCAL_SECRET_JSON=&quot;/ibm/openshift/auth.json&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Review images and configurations</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc adm release mirror -a ${LOCAL_SECRET_JSON} --from=quay.io/${PRODUCT_REPO}/${RELEASE_NAME}:${OCP_RELEASE}-${ARCHITECTURE} --to=${LOCAL_REGISTRY}/${LOCAL_REPOSITORY} --to-release-image=${LOCAL_REGISTRY}/${LOCAL_REPOSITORY}:${OCP_RELEASE}-${ARCHITECTURE} --dry-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pull down images and send to local registry.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc image mirror -a ${LOCAL_SECRET_JSON} --from-dir=${REMOVABLE_MEDIA_PATH}/mirror &quot;file://openshift/release:${OCP_RELEASE}*&quot; ${LOCAL_REGISTRY}/${LOCAL_REPOSITORY} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="extract-the-openshift-installer">Extract the OpenShift Installer<a href="#extract-the-openshift-installer" class="hash-link" aria-label="Direct link to Extract the OpenShift Installer" title="Direct link to Extract the OpenShift Installer">​</a></h4>
<p>Generate the openshift-install binary for the version of openshift images that were pulled.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc adm release extract -a ${LOCAL_SECRET_JSON} --command=openshift-install &quot;${LOCAL_REGISTRY}/${LOCAL_REPOSITORY}:${OCP_RELEASE}-${ARCHITECTURE}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Move openshift-install to /usr/bin.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo mv openshift-install /usr/bin/openshift-install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-cluster-creation">Start cluster creation<a href="#start-cluster-creation" class="hash-link" aria-label="Direct link to Start cluster creation" title="Direct link to Start cluster creation">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="collect-information-for-configsh">Collect information for &#x27;config.sh&#x27;<a href="#collect-information-for-configsh" class="hash-link" aria-label="Direct link to Collect information for &#x27;config.sh&#x27;" title="Direct link to Collect information for &#x27;config.sh&#x27;">​</a></h4>
<p>Information needed to update &#x27;config.sh&#x27;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">Cluster Name</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Base Domain</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Registry URL</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Local Pull Secret updated with local registry auth.</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Additional Trust certs generated during the registry creation process.</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS Region</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS Private Subnets</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS VPC ID</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS VPC CIDR</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS RHCOS AMI ID</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Bootstrap allowed SSH CIDR</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Bootstrap Ignition URL (Bastion node&#x27;s hostname, port, and file name)</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Master Instance Type</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Worker Count</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Worker Instance Type</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>****Important Node: AWS CLI will need to be configured, and output format MUST be json</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-installation">Start the installation<a href="#start-the-installation" class="hash-link" aria-label="Direct link to Start the installation" title="Direct link to Start the installation">​</a></h4>
<p>After updating config.sh, run &quot;create_cluster_step_1.sh&quot;.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./create_cluster_step_1.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once this completes, create the DNS records listed in the script output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">api.{ClusterName}.{DOMAINNAME} -&gt; wxai-int-(random_string).elb.us-east-2.amazonaws.com</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">api-int.{ClusterName}.{DOMAINNAME} -&gt; wxai-int-(random_string).elb.us-east-2.amazonaws.com</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">*.apps.{ClusterName}.{DOMAINNAME} -&gt; wxai-int-(random_string).elb.us-east-2.amazonaws.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now run step 2:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">./create_cluster_step_2.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nfs-provisioner-setup">NFS Provisioner setup<a href="#nfs-provisioner-setup" class="hash-link" aria-label="Direct link to NFS Provisioner setup" title="Direct link to NFS Provisioner setup">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In a user managed instance of OCP on AWS, the EFS provisioner from AWS is not available. In our case we will be provisioning an EFS share, and then installing the NFS provioner to the cluster.2a</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-efs-filesystem">Creating the EFS filesystem<a href="#creating-the-efs-filesystem" class="hash-link" aria-label="Direct link to Creating the EFS filesystem" title="Direct link to Creating the EFS filesystem">​</a></h3>
<p>Create an AWS Elastic File System with the following commands:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">export CREATION_TOKEN=&#x27;ibm-wxai-token&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws efs create-file-system --creation-token ${CREATION_TOKEN} --encrypted --backup --performance-mode generalPurpose --throughput-mode elastic --region us-east-2 --tags Key=key,Value=value Key=key1,Value=value1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Set the Subnet IDs and Worker Security Group ID variables:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">export SUBNET_ID_1=&quot;US-EAST-2a Subnet ID&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export SUBNET_ID_2=&quot;US-EAST-2b Subnet ID&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export SUBNET_ID_3=&quot;US-EAST-2c Subnet ID&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export WORKER_SG=&quot;Worker Security Group ID&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">export EFS_ID=$(aws efs describe-file-systems --creation-token ${CREATION_TOKEN} | jq &#x27;.FileSystems[] | .&quot;FileSystemId&quot;&#x27;| tr -d &#x27;&quot;&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-mount-targets">Create mount targets:<a href="#create-mount-targets" class="hash-link" aria-label="Direct link to Create mount targets:" title="Direct link to Create mount targets:">​</a></h4>
<p>Run the following commands to create mount targets that include the three subnets used by the worker nodes:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">aws efs create-mount-target --file-system-id ${EFS_ID} --subnet-id  ${SUBNET_ID_1} --security-group ${WORKER_SG_ID} --region us-east-2</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws efs create-mount-target --file-system-id ${EFS_ID} --subnet-id  ${SUBNET_ID_2} --security-group ${WORKER_SG_ID} --region us-east-2</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws efs create-mount-target --file-system-id ${EFS_ID} --subnet-id  ${SUBNET_ID_3} --security-group ${WORKER_SG_ID} --region us-east-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-provisioner-with-a-yaml">Deploying the provisioner with a yaml<a href="#deploying-the-provisioner-with-a-yaml" class="hash-link" aria-label="Direct link to Deploying the provisioner with a yaml" title="Direct link to Deploying the provisioner with a yaml">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="download-nfs-provisioneryml">Download nfs-provisioner.yml<a href="#download-nfs-provisioneryml" class="hash-link" aria-label="Direct link to Download nfs-provisioner.yml" title="Direct link to Download nfs-provisioner.yml">​</a></h4>
<p>Download the nfs-provisioner.yml file from here:</p>
<p><a href="https://raw.githubusercontent.com/ibm-client-engineering/solution-wxai-aws/main/static/scripts/nfs_provisioner.yml" target="_blank" rel="noopener noreferrer">https://raw.githubusercontent.com/ibm-client-engineering/solution-wxai-aws/main/static/scripts/nfs_provisioner.yml</a></p>
<p>Confirm that the “EFS_ID” is properly set from the previous step:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">echo $EFS_ID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then update the ‘nfs_provisioner.yml’ to use the new EFS ID:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/EFS_ID/${EFS_ID}/g&quot; nfs_provisioner.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="apply-nfs_provisioneryml">Apply nfs_provisioner.yml<a href="#apply-nfs_provisioneryml" class="hash-link" aria-label="Direct link to Apply nfs_provisioner.yml" title="Direct link to Apply nfs_provisioner.yml">​</a></h4>
<p>Now create the nfs_provisioner in the cluster:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc create -f nfs_provisioner.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-provisioner-with-helm">Deploying the provisioner with helm<a href="#deploying-the-provisioner-with-helm" class="hash-link" aria-label="Direct link to Deploying the provisioner with helm" title="Direct link to Deploying the provisioner with helm">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-helm">Installing helm<a href="#installing-helm" class="hash-link" aria-label="Direct link to Installing helm" title="Direct link to Installing helm">​</a></h4>
<p>Verify and/or install openssl</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo dnf </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">y install openssl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the following commands to install helm to the bastion host</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">curl </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">fsSL </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">o get_helm</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">sh</span><span class="token plain"> https</span><span class="token operator" style="color:#d7deea">:</span><span class="token operator" style="color:#d7deea">/</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">raw</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">githubusercontent</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">com</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">main</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">scripts</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">get</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">helm</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">chmod </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain">x get_helm</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">.</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">get_helm</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Downloading</span><span class="token plain"> https</span><span class="token operator" style="color:#d7deea">:</span><span class="token operator" style="color:#d7deea">/</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">helm</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">sh</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">v3</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token number" style="color:#5a9bcf">14.3</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">linux</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">amd64</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">tar</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">gz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Verifying</span><span class="token plain"> checksum</span><span class="token spread operator" style="color:#d7deea">...</span><span class="token plain"> </span><span class="token maybe-class-name">Done</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token property-access maybe-class-name">Preparing</span><span class="token plain"> to install helm into </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">usr</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">local</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">bin</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">helm installed into </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">usr</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">local</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">bin</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Verify helm is available</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">helm</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">The</span><span class="token plain"> </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> manager</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Common</span><span class="token plain"> actions </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token maybe-class-name">Helm</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> helm search</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">    search </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> charts</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> helm pull</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">      download a chart to your local directory to view</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> helm install</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">   upload the chart to </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> helm list</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">      list releases </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> charts</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Environment</span><span class="token plain"> variables</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Name</span><span class="token plain">                               </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Description</span><span class="token plain">                                                                                                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">|</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_CACHE_HOME</span><span class="token plain">                   </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> an alternative </span><span class="token dom variable" style="color:#d7deea">location</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> storing cached files</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                      </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_CONFIG_HOME</span><span class="token plain">                  </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> an alternative </span><span class="token dom variable" style="color:#d7deea">location</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> storing </span><span class="token maybe-class-name">Helm</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_DATA_HOME</span><span class="token plain">                    </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> an alternative </span><span class="token dom variable" style="color:#d7deea">location</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> storing </span><span class="token maybe-class-name">Helm</span><span class="token plain"> data</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                         </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_DEBUG</span><span class="token plain">                        </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> indicate whether or not </span><span class="token maybe-class-name">Helm</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> running </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token maybe-class-name">Debug</span><span class="token plain"> mode                                                      </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_DRIVER</span><span class="token plain">                       </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the backend storage driver</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">Values</span><span class="token plain"> are</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> configmap</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> secret</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> memory</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> sql</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_DRIVER_SQL_CONNECTION_STRING</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the connection </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain"> the </span><span class="token constant" style="color:#5a9bcf">SQL</span><span class="token plain"> storage driver should use</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                               </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_MAX_HISTORY</span><span class="token plain">                  </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the maximum </span><span class="token builtin" style="color:#D8DEE9">number</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> helm release history</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                            </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_NAMESPACE</span><span class="token plain">                    </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> used </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the helm operations</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                            </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_NO_PLUGINS</span><span class="token plain">                   </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> disable plugins</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#FAC863">Set</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">HELM_NO_PLUGINS</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> to disable plugins</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                 </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_PLUGINS</span><span class="token plain">                      </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the path to the plugins directory                                                                      </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_REGISTRY_CONFIG</span><span class="token plain">              </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the path to the registry config file</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                                  </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_REPOSITORY_CACHE</span><span class="token plain">             </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the path to the repository cache directory                                                             </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_REPOSITORY_CONFIG</span><span class="token plain">            </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the path to the repositories file</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                                     </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">KUBECONFIG</span><span class="token plain">                        </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> an alternative </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> configuration </span><span class="token function" style="color:#79b6f2">file</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;~/.kube/config&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">                                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBEAPISERVER</span><span class="token plain">                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> </span><span class="token maybe-class-name">Server</span><span class="token plain"> </span><span class="token maybe-class-name">Endpoint</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> authentication                                                  </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBECAFILE</span><span class="token plain">                   </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> certificate authority file</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                             </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBEASGROUPS</span><span class="token plain">                 </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token maybe-class-name">Groups</span><span class="token plain"> to use </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> impersonation using a comma</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">separated list</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                      </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBEASUSER</span><span class="token plain">                   </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token maybe-class-name">Username</span><span class="token plain"> to impersonate </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the operation</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                         </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBECONTEXT</span><span class="token plain">                  </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the name </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> the kubeconfig context</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                                    </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBETOKEN</span><span class="token plain">                    </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token maybe-class-name">Bearer</span><span class="token plain"> </span><span class="token maybe-class-name">KubeToken</span><span class="token plain"> used </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> authentication</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">                                                          </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBEINSECURE_SKIP_TLS_VERIFY</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> indicate </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> server&#x27;s certificate validation should be </span><span class="token function" style="color:#79b6f2">skipped</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">insecure</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_KUBETLS_SERVER_NAME</span><span class="token plain">          </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the server name used to validate the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> server certificate                                 </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_BURST_LIMIT</span><span class="token plain">                  </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> burst limit </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> the </span><span class="token keyword" style="color:#c5a5c5">case</span><span class="token plain"> the server contains many </span><span class="token function" style="color:#79b6f2">CRDs</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> to disable</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">         </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HELM_QPS</span><span class="token plain">                          </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> the </span><span class="token maybe-class-name">Queries</span><span class="token plain"> </span><span class="token maybe-class-name">Per</span><span class="token plain"> </span><span class="token maybe-class-name">Second</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> cases where a high </span><span class="token builtin" style="color:#D8DEE9">number</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> calls exceed the option </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> higher burst values </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Helm</span><span class="token plain"> stores cache</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> and data based on the following configuration order</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token maybe-class-name">If</span><span class="token plain"> a </span><span class="token constant" style="color:#5a9bcf">HELM_</span><span class="token operator" style="color:#d7deea">*</span><span class="token plain">_HOME environment variable </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> set</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> it will be used</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token maybe-class-name">Otherwise</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> on systems supporting the </span><span class="token constant" style="color:#5a9bcf">XDG</span><span class="token plain"> base directory specification</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> the </span><span class="token constant" style="color:#5a9bcf">XDG</span><span class="token plain"> variables will be used</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token maybe-class-name">When</span><span class="token plain"> no other </span><span class="token dom variable" style="color:#d7deea">location</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> a </span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token dom variable" style="color:#d7deea">location</span><span class="token plain"> will be used based on the operating system</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">By</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> the </span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> directories depend on the </span><span class="token maybe-class-name">Operating</span><span class="token plain"> </span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">The</span><span class="token plain"> defaults are listed below</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Operating</span><span class="token plain"> </span><span class="token maybe-class-name">System</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Cache</span><span class="token plain"> </span><span class="token maybe-class-name">Path</span><span class="token plain">                </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Configuration</span><span class="token plain"> </span><span class="token maybe-class-name">Path</span><span class="token plain">             </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Data</span><span class="token plain"> </span><span class="token maybe-class-name">Path</span><span class="token plain">               </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">|</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">|</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">|</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Linux</span><span class="token plain">            </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HOME</span><span class="token operator" style="color:#d7deea">/</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">cache</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm         </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HOME</span><span class="token operator" style="color:#d7deea">/</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">config</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm             </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HOME</span><span class="token operator" style="color:#d7deea">/</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">local</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">share</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> macOS            </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HOME</span><span class="token operator" style="color:#d7deea">/</span><span class="token maybe-class-name">Library</span><span class="token operator" style="color:#d7deea">/</span><span class="token maybe-class-name">Caches</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HOME</span><span class="token operator" style="color:#d7deea">/</span><span class="token maybe-class-name">Library</span><span class="token operator" style="color:#d7deea">/</span><span class="token maybe-class-name">Preferences</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> $</span><span class="token constant" style="color:#5a9bcf">HOME</span><span class="token operator" style="color:#d7deea">/</span><span class="token maybe-class-name">Library</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">helm      </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token maybe-class-name">Windows</span><span class="token plain">          </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">%</span><span class="token constant" style="color:#5a9bcf">TEMP</span><span class="token operator" style="color:#d7deea">%</span><span class="token plain">\helm               </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">%</span><span class="token constant" style="color:#5a9bcf">APPDATA</span><span class="token operator" style="color:#d7deea">%</span><span class="token plain">\helm                 </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">%</span><span class="token constant" style="color:#5a9bcf">APPDATA</span><span class="token operator" style="color:#d7deea">%</span><span class="token plain">\helm          </span><span class="token operator" style="color:#d7deea">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Usage</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  helm </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Available</span><span class="token plain"> </span><span class="token maybe-class-name">Commands</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  completion  generate autocompletion scripts </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the specified shell</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  create      create a </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">chart</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> the given name</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  dependency  manage a chart&#x27;s dependencies</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  env         helm client environment information</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">get</span><span class="token plain">         download extended information </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> a named release</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  help        </span><span class="token maybe-class-name">Help</span><span class="token plain"> about </span><span class="token builtin" style="color:#D8DEE9">any</span><span class="token plain"> command</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  history     fetch release history</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  install     install a chart</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  lint        examine a chart </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> possible issues</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  list        list releases</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain">     </span><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> a chart directory into a chart archive</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  plugin      install</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> list</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> or uninstall </span><span class="token maybe-class-name">Helm</span><span class="token plain"> plugins</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  pull        download a chart from a repository </span><span class="token function" style="color:#79b6f2">and</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">optionally</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> unpack it </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> local directory</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  push        push a chart to remote</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  registry    login to or logout from a registry</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  repo        add</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> list</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> remove</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> and index chart repositories</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  rollback    roll back a release to a previous revision</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  search      search </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> a keyword </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> charts</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  show        show information </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> a chart</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  status      display the status </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> the named release</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  template    locally render templates</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  test        run tests </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> a release</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  uninstall   uninstall a release</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  upgrade     upgrade a release</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  verify      verify that a chart at the given path has been signed and </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> valid</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  version     print the client version information</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Flags</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">burst</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">limit int                 client</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">side </span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> throttling </span><span class="token function" style="color:#79b6f2">limit</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">debug                           enable verbose output</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">h</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">help                            help </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> helm</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">apiserver </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">           the address and the port </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> server</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">group stringArray       group to impersonate </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the operation</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token plain"> flag can be repeated to specify multiple groups</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">user </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">             username to impersonate </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the operation</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">ca</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">file </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">             the certificate authority file </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> server connection</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">context </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">             name </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> the kubeconfig context to use</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">insecure</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">skip</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">tls</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">verify   </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> server&#x27;s certificate will not be checked </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> validity</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">This</span><span class="token plain"> will make your </span><span class="token constant" style="color:#5a9bcf">HTTPS</span><span class="token plain"> connections insecure</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">tls</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">server</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">name </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">     server name to use </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token plain"> server certificate validation</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">If</span><span class="token plain"> it </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> not provided</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> the hostname used to contact the server </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> used</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kube</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">token </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">               bearer token used </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> authentication</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">kubeconfig </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">               path to the kubeconfig file</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">n</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">--</span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> scope </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token plain"> request</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">qps float32                     queries per second used when communicating </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> the </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">API</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> not including bursting</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">registry</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">config </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">          path to the registry config </span><span class="token function" style="color:#79b6f2">file</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/home/kramerro/.config/helm/registry/config.json&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">repository</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">cache </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">         path to the file containing cached repository </span><span class="token function" style="color:#79b6f2">indexes</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/home/kramerro/.cache/helm/repository&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">repository</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">config </span><span class="token builtin" style="color:#D8DEE9">string</span><span class="token plain">        path to the file containing repository names and </span><span class="token function" style="color:#79b6f2">URLs</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/home/kramerro/.config/helm/repositories.yaml&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Use</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;helm [command] --help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> more information about a command</span><span class="token punctuation" style="color:#8dc891">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-to-ocp">Install to OCP<a href="#install-to-ocp" class="hash-link" aria-label="Direct link to Install to OCP" title="Direct link to Install to OCP">​</a></h3>
<p>From the OC cli:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">project nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token maybe-class-name">Now</span><span class="token plain"> using project </span><span class="token string" style="color:#8dc891">&quot;nfs-provisioner&quot;</span><span class="token plain"> on server </span><span class="token string" style="color:#8dc891">&quot;https://api.wxai.cpdu8vscs.ibmworkshops.com:6443&quot;</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token property-access maybe-class-name">You</span><span class="token plain"> can add applications to </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token plain"> project </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> the </span><span class="token string" style="color:#8dc891">&#x27;new-app&#x27;</span><span class="token plain"> command</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">For</span><span class="token plain"> example</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    oc </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">app rails</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">postgresql</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">to build a </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">example</span><span class="token plain"> application </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token maybe-class-name">Ruby</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">Or</span><span class="token plain"> use kubectl to deploy a simple </span><span class="token maybe-class-name">Kubernetes</span><span class="token plain"> application</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    kubectl create deployment hello</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">node </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain">image</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">registry</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">k8s</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">io</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">e2e</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">test</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">images</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">agnhost</span><span class="token operator" style="color:#d7deea">:</span><span class="token number" style="color:#5a9bcf">2.43</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">--</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">agnhost serve</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">hostname</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will automatically put you in that project.</p>
<p>Now set up the SCCs</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc apply </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">f </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;&lt;</span><span class="token constant" style="color:#5a9bcf">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowHostDirVolumePlugin</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowHostIPC</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowHostNetwork</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowHostPID</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowHostPorts</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowPrivilegeEscalation</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowPrivilegedContainer</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">allowedCapabilities</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> security</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">openshift</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">io</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">defaultAddCapabilities</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">fsGroup</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  type</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">RunAsAny</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">groups</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">SecurityContextConstraints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  annotations</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    kubernetes</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">io</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">description</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> &#x27;hostmount</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">anyuid provides all the features </span><span class="token keyword" style="color:#c5a5c5">of</span><span class="token plain"> the</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      restricted </span><span class="token constant" style="color:#5a9bcf">SCC</span><span class="token plain"> but allows host mounts and </span><span class="token builtin" style="color:#D8DEE9">any</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">UID</span><span class="token plain"> by a pod</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">  </span><span class="token property-access maybe-class-name">This</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">is</span><span class="token plain"> primarily</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      used by the persistent volume recycler</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">WARNING</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">SCC</span><span class="token plain"> allows host file system</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      access </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">any</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">UID</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> including </span><span class="token constant" style="color:#5a9bcf">UID</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0.</span><span class="token plain">  </span><span class="token maybe-class-name">Grant</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> caution</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">storage</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">hostmount</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">anyuid</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">readOnlyRootFilesystem</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">requiredDropCapabilities</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">MKNOD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">runAsUser</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  type</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">RunAsAny</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">seLinuxContext</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  type</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">MustRunAs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">supplementalGroups</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  type</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">RunAsAny</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">users</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> system</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">serviceaccount</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">subdir</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">external</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">volumes</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> configMap</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> downwardAPI</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> emptyDir</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> hostPath</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> nfs</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> persistentVolumeClaim</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> projected</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token constant" style="color:#5a9bcf">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>output:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">securitycontextconstraints</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">security</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">openshift</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">io</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">storage</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">hostmount</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">anyuid created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-helm-chart-and-run-the-helm-install">Install the helm chart and run the helm install<a href="#install-the-helm-chart-and-run-the-helm-install" class="hash-link" aria-label="Direct link to Install the helm chart and run the helm install" title="Direct link to Install the helm chart and run the helm install">​</a></h3>
<p>The <code>&lt;EFS URL&gt;</code> should be returned by the aws cli creation of the EFS storage filesystem.</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">helm repo add nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">subdir</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">external</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner https</span><span class="token operator" style="color:#d7deea">:</span><span class="token operator" style="color:#d7deea">/</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">kubernetes</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">sigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">github</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">io</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">subdir</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">external</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">helm install nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">subdir</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">external</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">subdir</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">external</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">subdir</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">external</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token operator" style="color:#d7deea">--</span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">provisioner \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token operator" style="color:#d7deea">--</span><span class="token keyword" style="color:#c5a5c5">set</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">server</span><span class="token operator" style="color:#d7deea">=</span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag class-name" style="color:#FAC863">EFS</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">URL</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain-text">\</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain-text">    --set nfs.path=/ \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain-text">    --set storageClass.defaultClass=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Verify the pods are up</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc </span><span class="token keyword" style="color:#c5a5c5">get</span><span class="token plain"> pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>EXAMPLE RETURNED OUTPUT HERE</em></p>
<p>Make sure the storage class now exists and is set to default</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc </span><span class="token keyword" style="color:#c5a5c5">get</span><span class="token plain"> sc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Verify that the storage will provision with the following test deployment</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc apply </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">f </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;&lt;</span><span class="token constant" style="color:#5a9bcf">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">Pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> test</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">spec</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  containers</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> name</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> test</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    image</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> busybox</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">stable</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    command</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/bin/sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    args</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;-c&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;touch /mnt/SUCCESS &amp;&amp; exit 0 || exit 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    volumeMounts</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> name</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">pvc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        mountPath</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/mnt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  restartPolicy</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;Never&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  volumes</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> name</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">pvc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      persistentVolumeClaim</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        claimName</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> test</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">claim</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token operator" style="color:#d7deea">--</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token maybe-class-name">PersistentVolumeClaim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> test</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">claim</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">spec</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  storageClassName</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> nfs</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain">client</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  accessModes</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> </span><span class="token maybe-class-name">ReadWriteMany</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  resources</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    requests</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      storage</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> 1Mi</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token constant" style="color:#5a9bcf">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="change-cluster-domain">Change Cluster Domain<a href="#change-cluster-domain" class="hash-link" aria-label="Direct link to Change Cluster Domain" title="Direct link to Change Cluster Domain">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-new-self-signed-certificate">Generate new self-signed certificate<a href="#generate-new-self-signed-certificate" class="hash-link" aria-label="Direct link to Generate new self-signed certificate" title="Direct link to Generate new self-signed certificate">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="generate-ca-certs">Generate CA certs<a href="#generate-ca-certs" class="hash-link" aria-label="Direct link to Generate CA certs" title="Direct link to Generate CA certs">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">openssl genrsa -out ca.key 2048</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">openssl req -new -x509 -days 365 -key ca.key -subj &quot;/C=CN/ST=GD/L=SZ/O=Acme, Inc./CN=Acme Root CA&quot; -out ca.crt</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="generate-server-certs">Generate Server certs<a href="#generate-server-certs" class="hash-link" aria-label="Direct link to Generate Server certs" title="Direct link to Generate Server certs">​</a></h4>
<p>Generate &#x27;server.csr&#x27;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">openssl req -newkey rsa:2048 -nodes -keyout server.key -subj &quot;/C=CN/ST=GD/L=SZ/O=Acme, Inc./CN=*.{BASE_DOMAIN}&quot; -out server.csr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Generate &#x27;server.crt&#x27;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">openssl x509 -req -extfile &lt;(printf &quot;subjectAltName=DNS:*.{BASE_DOMAIN}&quot;) -days 365 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-cluster">Update the cluster:<a href="#update-the-cluster" class="hash-link" aria-label="Direct link to Update the cluster:" title="Direct link to Update the cluster:">​</a></h4>
<p>Create the new secret which will contain the cert and key:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc create secret tls custom-cert --cert=server.crt --key=server.key -n openshift-config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Update the ingress:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc edit ingresses.config/cluster -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add the following under &#x27;spec:&#x27;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  componentRoutes:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  - hostname: console.{NEW_URL}</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    name: console</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    namespace: openshift-console</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    servingCertKeyPairSecret:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      name: custom-cert</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  - hostname: oauth.{NEW_URL}</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    name: oauth-openshift</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    namespace: openshift-authentication</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    servingCertKeyPairSecret:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      name: custom-cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="increase-primary-disk-size-on-worker-nodes">Increase Primary Disk size on worker nodes:<a href="#increase-primary-disk-size-on-worker-nodes" class="hash-link" aria-label="Direct link to Increase Primary Disk size on worker nodes:" title="Direct link to Increase Primary Disk size on worker nodes:">​</a></h2>
<ol>
<li>Run the following bash one-liner to increase the primary disk on all worker nodes to 500GB:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">aws ec2 describe-instances --query &#x27;Reservations[*].Instances[*].[InstanceId,Tags[?Key==`Name`].Value|[0],BlockDeviceMappings[0].Ebs.VolumeId]&#x27; --output text | grep worker | awk &#x27;{print $3}&#x27; | while read volume_id; do aws ec2 modify-volume --volume-id $volume_id --size 500; done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Log into the node with following command:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">oc debug node/&lt;node_name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Once in the node, run the following:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">chroot /host</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>then:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo lsblk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output should look like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># sudo lsblk</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">nvme1n1     259:0    0     1T  0 disk</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">nvme0n1     259:1    0   500G  0 disk</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">|-nvme0n1p1 259:2    0     1M  0 part</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">|-nvme0n1p2 259:3    0   127M  0 part</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">|-nvme0n1p3 259:4    0   384M  0 part /boot</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">`-nvme0n1p4 259:5    0 239.5G  0 part /var/lib/kubelet/pods/555d6f90-41fd-49d2-8aad-fa7293a924e4/volume-subpaths/app-config-override/wd-discovery-cnm-api/2</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/57d28f73-d355-4092-8e52-6b6aeec28bd5/volume-subpaths/clouseau-config/search/4</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/fcb4b5ec-ea1a-42c7-908c-a027cf885ca1/volume-subpaths/db2wh-cm/zen-database-core/1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/fcb4b5ec-ea1a-42c7-908c-a027cf885ca1/volume-subpaths/db2oltp-cm/zen-database-core/0</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/5e35fe3f-7e4d-4729-b3dd-b9553ffd73f6/volume-subpaths/nginx-conf/monitoring-plugin/1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /sysroot/ostree/deploy/rhcos/var</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /sysroot</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /usr</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /etc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Find the part on the disk that you wish to increase, in my case it was &#x27;nvme0n1p4&#x27;.</li>
</ol>
<p>Now we extend the partition, by targeting the disk (Example: /dev/nvme0n1) and the partition (Example: 4)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo growpart /dev/nvme0n1 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Check the disk sizes again:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo lsblk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is what my output looks like now:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">nvme1n1     259:0    0     1T  0 disk</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">nvme0n1     259:1    0   500G  0 disk</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">|-nvme0n1p1 259:2    0     1M  0 part</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">|-nvme0n1p2 259:3    0   127M  0 part</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">|-nvme0n1p3 259:4    0   384M  0 part /boot</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">`-nvme0n1p4 259:5    0 499.5G  0 part /var/lib/kubelet/pods/555d6f90-41fd-49d2-8aad-fa7293a924e4/volume-subpaths/app-config-override/wd-discovery-cnm-api/2</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/57d28f73-d355-4092-8e52-6b6aeec28bd5/volume-subpaths/clouseau-config/search/4</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/fcb4b5ec-ea1a-42c7-908c-a027cf885ca1/volume-subpaths/db2wh-cm/zen-database-core/1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/fcb4b5ec-ea1a-42c7-908c-a027cf885ca1/volume-subpaths/db2oltp-cm/zen-database-core/0</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var/lib/kubelet/pods/5e35fe3f-7e4d-4729-b3dd-b9553ffd73f6/volume-subpaths/nginx-conf/monitoring-plugin/1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /var</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /sysroot/ostree/deploy/rhcos/var</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /sysroot</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /usr</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /etc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                                      /</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="6">
<li>Last step is to extend the file system:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sudo xfs_growfs -d /</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/solution-wxai-aws/Deployment/Infrastructure/preparation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Preparation Steps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/solution-wxai-aws/software"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Software</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prepare-the-bastion-node" class="table-of-contents__link toc-highlight">Prepare the Bastion Node</a><ul><li><a href="#update-the-os-and-install-additional-tools" class="table-of-contents__link toc-highlight">Update the OS and install additional tools</a></li><li><a href="#clone-the-repository-to-the-bootnode" class="table-of-contents__link toc-highlight">Clone the repository to the bootnode.</a></li><li><a href="#run-setup_bastion-script" class="table-of-contents__link toc-highlight">Run &#39;setup_bastion&#39; script</a></li><li><a href="#change-the-bootnode-hostname-to-registrydomain" class="table-of-contents__link toc-highlight">Change the bootnode hostname to &#39;registry.$DOMAIN&#39;</a></li></ul></li><li><a href="#setup-services" class="table-of-contents__link toc-highlight">Setup Services</a><ul><li><a href="#create-registry" class="table-of-contents__link toc-highlight">Create Registry</a></li><li><a href="#start-the-registry" class="table-of-contents__link toc-highlight">Start the registry</a></li><li><a href="#add-your-local-registry-login-details" class="table-of-contents__link toc-highlight">Add your local registry login details</a></li><li><a href="#add-your-details-to-the-authjson" class="table-of-contents__link toc-highlight">Add your details to the auth.json</a></li></ul></li><li><a href="#setup-local-and-internal-registries" class="table-of-contents__link toc-highlight">Setup Local and Internal registries</a><ul><li><a href="#load-the-registry-with-the-ocp-files" class="table-of-contents__link toc-highlight">Load the registry with the OCP files</a></li><li><a href="#extract-the-openshift-installer" class="table-of-contents__link toc-highlight">Extract the OpenShift Installer</a></li></ul></li><li><a href="#start-cluster-creation" class="table-of-contents__link toc-highlight">Start cluster creation</a><ul><li><a href="#collect-information-for-configsh" class="table-of-contents__link toc-highlight">Collect information for &#39;config.sh&#39;</a></li><li><a href="#start-the-installation" class="table-of-contents__link toc-highlight">Start the installation</a></li></ul></li><li><a href="#nfs-provisioner-setup" class="table-of-contents__link toc-highlight">NFS Provisioner setup</a><ul><li><a href="#creating-the-efs-filesystem" class="table-of-contents__link toc-highlight">Creating the EFS filesystem</a><ul><li><a href="#create-mount-targets" class="table-of-contents__link toc-highlight">Create mount targets:</a></li></ul></li><li><a href="#deploying-the-provisioner-with-a-yaml" class="table-of-contents__link toc-highlight">Deploying the provisioner with a yaml</a><ul><li><a href="#download-nfs-provisioneryml" class="table-of-contents__link toc-highlight">Download nfs-provisioner.yml</a></li><li><a href="#apply-nfs_provisioneryml" class="table-of-contents__link toc-highlight">Apply nfs_provisioner.yml</a></li></ul></li><li><a href="#deploying-the-provisioner-with-helm" class="table-of-contents__link toc-highlight">Deploying the provisioner with helm</a><ul><li><a href="#installing-helm" class="table-of-contents__link toc-highlight">Installing helm</a></li></ul></li><li><a href="#install-to-ocp" class="table-of-contents__link toc-highlight">Install to OCP</a></li><li><a href="#install-the-helm-chart-and-run-the-helm-install" class="table-of-contents__link toc-highlight">Install the helm chart and run the helm install</a></li></ul></li><li><a href="#change-cluster-domain" class="table-of-contents__link toc-highlight">Change Cluster Domain</a><ul><li><a href="#generate-new-self-signed-certificate" class="table-of-contents__link toc-highlight">Generate new self-signed certificate</a><ul><li><a href="#generate-ca-certs" class="table-of-contents__link toc-highlight">Generate CA certs</a></li><li><a href="#generate-server-certs" class="table-of-contents__link toc-highlight">Generate Server certs</a></li><li><a href="#update-the-cluster" class="table-of-contents__link toc-highlight">Update the cluster:</a></li></ul></li></ul></li><li><a href="#increase-primary-disk-size-on-worker-nodes" class="table-of-contents__link toc-highlight">Increase Primary Disk size on worker nodes:</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Explore</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM</a></li><li class="footer__item"><a href="https://www.ibm.com/client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering - Open Solutions Library</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://ibm.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IBM_logo.svg" alt="IBM Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="150" height="150"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IBM_logo.svg" alt="IBM Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="150" height="150"></a></div></div></div></footer></div>
</body>
</html>