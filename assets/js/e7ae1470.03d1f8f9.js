"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1377],{729:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var n=s(5893),r=s(1151);const i={id:"prerequisites",sidebar_position:2,title:"Prerequisites",custom_edit_url:null},l=void 0,c={id:"GettingStarted/prerequisites",title:"Prerequisites",description:"Installing OpenShift and Cloud Pak for Data requires specific access, resources and considerations on AWS. In this documentation, we are assuming a CloudFormation install on user-provisioned infrastructure.",source:"@site/docs/1-GettingStarted/2-Prequisites.mdx",sourceDirName:"1-GettingStarted",slug:"/GettingStarted/prerequisites",permalink:"/solution-wxai-aws/GettingStarted/prerequisites",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"prerequisites",sidebar_position:2,title:"Prerequisites",custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Architecture",permalink:"/solution-wxai-aws/GettingStarted/architecture"},next:{title:"Installation",permalink:"/solution-wxai-aws/GettingStarted/installation"}},d={},a=[{value:"OCP Deployment Requirements",id:"ocp-deployment-requirements",level:2},{value:"Required IAM User",id:"required-iam-user",level:3},{value:"Required Permissions (if not using Administrator Access)",id:"required-permissions-if-not-using-administrator-access",level:4},{value:"AWS Role Permissions Checker",id:"aws-role-permissions-checker",level:4},{value:"Required AWS Infrastructure Components",id:"required-aws-infrastructure-components",level:3},{value:"Required VPC Components",id:"required-vpc-components",level:4},{value:"Required DNS and load balancing components",id:"required-dns-and-load-balancing-components",level:4},{value:"Required Security groups",id:"required-security-groups",level:4},{value:"Control plane Ingress",id:"control-plane-ingress",level:4},{value:"Worker Ingress",id:"worker-ingress",level:4},{value:"Cluster machines",id:"cluster-machines",level:3}];function o(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components},{Details:i}=t;return i||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Installing OpenShift and Cloud Pak for Data requires specific access, resources and considerations on AWS. In this documentation, we are assuming a CloudFormation install on user-provisioned infrastructure."}),"\n",(0,n.jsx)(t.h2,{id:"ocp-deployment-requirements",children:"OCP Deployment Requirements"}),"\n",(0,n.jsx)(t.h3,{id:"required-iam-user",children:"Required IAM User"}),"\n",(0,n.jsx)(t.p,{children:"Each Amazon Web Services (AWS) account contains a root user account that is based on the email address you used to create the account. This is a highly-privileged account, and it is recommended to use it for only initial account and billing configuration, creating an initial set of users, and securing the account. Before you install OpenShift Container Platform, create a secondary IAM administrative user. As you complete the Creating an IAM User in Your AWS Account procedure in the AWS documentation, set the following options:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Specify the IAM user name and select Programmatic access."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Attach the AdministratorAccess policy to ensure that the account has sufficient permission to create the cluster. This policy provides the cluster with the ability to grant credentials to each OpenShift Container Platform component. The cluster grants the components only the credentials that they require."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsxs)(t.p,{children:["While it is possible to create a policy that grants the all of the required AWS permissions and attach it to the user, this is not the preferred option. ",(0,n.jsx)("strong",{children:"The cluster will not have the ability to grant additional credentials to individual components, so the same credentials are used by all components."})]})}),"\n",(0,n.jsxs)(t.ol,{start:"3",children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Optional: Add metadata to the user by attaching tags."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Confirm that the user name that you specified is granted the AdministratorAccess policy."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Record the access key ID and secret access key values. You must use these values when you configure your local machine to run the installation program."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsx)(t.p,{children:"You cannot use a temporary session token that you generated while using a multi-factor authentication device to authenticate to AWS when you deploy a cluster. The cluster continues to use your current AWS credentials to create AWS resources for the entire life of the cluster, so you must use key-based, long-term credentials."})}),"\n",(0,n.jsxs)(t.p,{children:["Your IAM user must have the permission tag",":GetResources"," in the region us-east-1 to delete the base cluster resources. As part of the AWS API requirement, the OpenShift Container Platform installation program performs various actions in this region."]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"When you attach the AdministratorAccess policy to the IAM user that you create in Amazon Web Services (AWS), you grant that user all of the required permissions."})}),"\n",(0,n.jsx)(t.p,{children:"To deploy all components of an OpenShift Container Platform cluster, the IAM user requires the following permissions:"}),"\n",(0,n.jsx)(t.h4,{id:"required-permissions-if-not-using-administrator-access",children:"Required Permissions (if not using Administrator Access)"}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required EC2 permissions for installation"})}),(0,n.jsxs)(t.p,{children:["ec2",":AuthorizeSecurityGroupEgress"]}),(0,n.jsxs)(t.p,{children:["ec2",":AuthorizeSecurityGroupIngress"]}),(0,n.jsxs)(t.p,{children:["ec2",":CopyImage"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateNetworkInterface"]}),(0,n.jsxs)(t.p,{children:["ec2",":AttachNetworkInterface"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateSecurityGroup"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateTags"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateVolume"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteSecurityGroup"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteSnapshot"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteTags"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeregisterImage"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeAccountAttributes"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeAddresses"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeAvailabilityZones"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeDhcpOptions"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeImages"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeInstanceAttribute"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeInstanceCreditSpecifications"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeInstances"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeInstanceTypes"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeInternetGateways"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeKeyPairs"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeNatGateways"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeNetworkAcls"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeNetworkInterfaces"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribePrefixLists"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeRegions"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeRouteTables"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeSecurityGroups"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeSubnets"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeTags"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeVolumes"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeVpcAttribute"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeVpcClassicLink"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeVpcClassicLinkDnsSupport"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeVpcEndpoints"]}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeVpcs"]}),(0,n.jsxs)(t.p,{children:["ec2",":GetEbsDefaultKmsKeyId"]}),(0,n.jsxs)(t.p,{children:["ec2",":ModifyInstanceAttribute"]}),(0,n.jsxs)(t.p,{children:["ec2",":ModifyNetworkInterfaceAttribute"]}),(0,n.jsxs)(t.p,{children:["ec2",":RevokeSecurityGroupEgress"]}),(0,n.jsxs)(t.p,{children:["ec2",":RevokeSecurityGroupIngress"]}),(0,n.jsxs)(t.p,{children:["ec2",":RunInstances"]}),(0,n.jsxs)(t.p,{children:["ec2",":TerminateInstances"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required permissions for creating network resources during installation"})}),(0,n.jsxs)(t.p,{children:["ec2",":AllocateAddress"]}),(0,n.jsxs)(t.p,{children:["ec2",":AssociateAddress"]}),(0,n.jsxs)(t.p,{children:["ec2",":AssociateDhcpOptions"]}),(0,n.jsxs)(t.p,{children:["ec2",":AssociateRouteTable"]}),(0,n.jsxs)(t.p,{children:["ec2",":AttachInternetGateway"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateDhcpOptions"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateInternetGateway"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateNatGateway"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateRoute"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateRouteTable"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateSubnet"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateVpc"]}),(0,n.jsxs)(t.p,{children:["ec2",":CreateVpcEndpoint"]}),(0,n.jsxs)(t.p,{children:["ec2",":ModifySubnetAttribute"]}),(0,n.jsxs)(t.p,{children:["ec2",":ModifyVpcAttribute"]}),(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"If you use an existing VPC, your account does not require these permissions for creating network resources."})})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required Elastic Load Balancing permissions (ELB) for installation"})}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":AddTags"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":ApplySecurityGroupsToLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":AttachLoadBalancerToSubnets"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":ConfigureHealthCheck"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":CreateLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":CreateLoadBalancerListeners"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DeleteLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DeregisterInstancesFromLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeInstanceHealth"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeLoadBalancerAttributes"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeLoadBalancers"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeTags"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":ModifyLoadBalancerAttributes"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":RegisterInstancesWithLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":SetLoadBalancerPoliciesOfListener"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required Elastic Load Balancing permissions (ELBv2) for installation"})}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":AddTags"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":CreateListener"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":CreateLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":CreateTargetGroup"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DeleteLoadBalancer"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DeregisterTargets"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeListeners"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeLoadBalancerAttributes"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeLoadBalancers"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeTargetGroupAttributes"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeTargetHealth"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":ModifyLoadBalancerAttributes"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":ModifyTargetGroup"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":ModifyTargetGroupAttributes"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":RegisterTargets"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required IAM permissions for installation"})}),(0,n.jsxs)(t.p,{children:["iam",":AddRoleToInstanceProfile"]}),(0,n.jsxs)(t.p,{children:["iam",":CreateInstanceProfile"]}),(0,n.jsxs)(t.p,{children:["iam",":CreateRole"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteInstanceProfile"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteRole"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteRolePolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":GetInstanceProfile"]}),(0,n.jsxs)(t.p,{children:["iam",":GetRole"]}),(0,n.jsxs)(t.p,{children:["iam",":GetRolePolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":GetUser"]}),(0,n.jsxs)(t.p,{children:["iam",":ListInstanceProfilesForRole"]}),(0,n.jsxs)(t.p,{children:["iam",":ListRoles"]}),(0,n.jsxs)(t.p,{children:["iam",":ListUsers"]}),(0,n.jsxs)(t.p,{children:["iam",":PassRole"]}),(0,n.jsxs)(t.p,{children:["iam",":PutRolePolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":RemoveRoleFromInstanceProfile"]}),(0,n.jsxs)(t.p,{children:["iam",":SimulatePrincipalPolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":TagRole"]}),(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["If you have not created a load balancer in your AWS account, the IAM user also requires the iam",":CreateServiceLinkedRole"," permission."]})})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required Route 53 permissions for installation"})}),(0,n.jsxs)(t.p,{children:["route53",":ChangeResourceRecordSets"]}),(0,n.jsxs)(t.p,{children:["route53",":ChangeTagsForResource"]}),(0,n.jsxs)(t.p,{children:["route53",":CreateHostedZone"]}),(0,n.jsxs)(t.p,{children:["route53",":DeleteHostedZone"]}),(0,n.jsxs)(t.p,{children:["route53",":GetChange"]}),(0,n.jsxs)(t.p,{children:["route53",":GetHostedZone"]}),(0,n.jsxs)(t.p,{children:["route53",":ListHostedZones"]}),(0,n.jsxs)(t.p,{children:["route53",":ListHostedZonesByName"]}),(0,n.jsxs)(t.p,{children:["route53",":ListResourceRecordSets"]}),(0,n.jsxs)(t.p,{children:["route53",":ListTagsForResource"]}),(0,n.jsxs)(t.p,{children:["route53",":UpdateHostedZoneComment"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required S3 permissions for installation"})}),(0,n.jsxs)(t.p,{children:["s3",":CreateBucket"]}),(0,n.jsxs)(t.p,{children:["s3",":DeleteBucket"]}),(0,n.jsxs)(t.p,{children:["s3",":GetAccelerateConfiguration"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketAcl"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketCors"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketLocation"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketLogging"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketPolicy"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketObjectLockConfiguration"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketRequestPayment"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketTagging"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketVersioning"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketWebsite"]}),(0,n.jsxs)(t.p,{children:["s3",":GetEncryptionConfiguration"]}),(0,n.jsxs)(t.p,{children:["s3",":GetLifecycleConfiguration"]}),(0,n.jsxs)(t.p,{children:["s3",":GetReplicationConfiguration"]}),(0,n.jsxs)(t.p,{children:["s3",":ListBucket"]}),(0,n.jsxs)(t.p,{children:["s3",":PutBucketAcl"]}),(0,n.jsxs)(t.p,{children:["s3",":PutBucketTagging"]}),(0,n.jsxs)(t.p,{children:["s3",":PutEncryptionConfiguration"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"S3 permissions that cluster Operators required"})}),(0,n.jsxs)(t.p,{children:["s3",":DeleteObject"]}),(0,n.jsxs)(t.p,{children:["s3",":GetObject"]}),(0,n.jsxs)(t.p,{children:["s3",":GetObjectAcl"]}),(0,n.jsxs)(t.p,{children:["s3",":GetObjectTagging"]}),(0,n.jsxs)(t.p,{children:["s3",":GetObjectVersion"]}),(0,n.jsxs)(t.p,{children:["s3",":PutObject"]}),(0,n.jsxs)(t.p,{children:["s3",":PutObjectAcl"]}),(0,n.jsxs)(t.p,{children:["s3",":PutObjectTagging"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required permissions to delete base cluster resources"})}),(0,n.jsxs)(t.p,{children:["autoscaling",":DescribeAutoScalingGroups"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeletePlacementGroup"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteNetworkInterface"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteVolume"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DeleteTargetGroup"]}),(0,n.jsxs)(t.p,{children:["elasticloadbalancing",":DescribeTargetGroups"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteAccessKey"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteUser"]}),(0,n.jsxs)(t.p,{children:["iam",":ListAttachedRolePolicies"]}),(0,n.jsxs)(t.p,{children:["iam",":ListInstanceProfiles"]}),(0,n.jsxs)(t.p,{children:["iam",":ListRolePolicies"]}),(0,n.jsxs)(t.p,{children:["iam",":ListUserPolicies"]}),(0,n.jsxs)(t.p,{children:["s3",":DeleteObject"]}),(0,n.jsxs)(t.p,{children:["s3",":ListBucketVersions"]}),(0,n.jsxs)(t.p,{children:["tag",":GetResources"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required permissions to delete network resources"})}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteDhcpOptions"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteInternetGateway"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteNatGateway"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteRoute"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteRouteTable"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteSubnet"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteVpc"]}),(0,n.jsxs)(t.p,{children:["ec2",":DeleteVpcEndpoints"]}),(0,n.jsxs)(t.p,{children:["ec2",":DetachInternetGateway"]}),(0,n.jsxs)(t.p,{children:["ec2",":DisassociateRouteTable"]}),(0,n.jsxs)(t.p,{children:["ec2",":ReleaseAddress"]}),(0,n.jsxs)(t.p,{children:["ec2",":ReplaceRouteTableAssociation"]}),(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["If you use an existing VPC, your account does not require these permissions to delete network resources. Instead, your account only requires the tag",":UntagResources"," permission to delete network resources."]})})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Required permissions to delete a cluster with shared instance roles"})}),(0,n.jsxs)(t.p,{children:["iam",":UntagRole"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Additional IAM and S3 permissions that are required to create manifests"})}),(0,n.jsxs)(t.p,{children:["iam",":DeleteAccessKey"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteUser"]}),(0,n.jsxs)(t.p,{children:["iam",":DeleteUserPolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":GetUserPolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":ListAccessKeys"]}),(0,n.jsxs)(t.p,{children:["iam",":PutUserPolicy"]}),(0,n.jsxs)(t.p,{children:["iam",":TagUser"]}),(0,n.jsxs)(t.p,{children:["s3",":PutBucketPublicAccessBlock"]}),(0,n.jsxs)(t.p,{children:["s3",":GetBucketPublicAccessBlock"]}),(0,n.jsxs)(t.p,{children:["s3",":PutLifecycleConfiguration"]}),(0,n.jsxs)(t.p,{children:["s3",":HeadBucket"]}),(0,n.jsxs)(t.p,{children:["s3",":ListBucketMultipartUploads"]}),(0,n.jsxs)(t.p,{children:["s3",":AbortMultipartUpload"]}),(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["If you are managing your cloud provider credentials with mint mode, the IAM user also requires the iam",":CreateAccessKey"," and iam",":CreateUser"," permissions."]})})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Optional permissions for instance and quota checks for installation"})}),(0,n.jsxs)(t.p,{children:["ec2",":DescribeInstanceTypeOfferings"]}),(0,n.jsxs)(t.p,{children:["servicequotas",":ListAWSDefaultServiceQuotas"]})]}),"\n",(0,n.jsxs)(i,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)("b",{children:"Optional permissions for the cluster owner account when installing a cluster on a shared VPC"})}),(0,n.jsxs)(t.p,{children:["sts",":AssumeRole"]})]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["For more details on the IAM user requirements, see ",(0,n.jsx)(t.a,{href:"https://docs.openshift.com/container-platform/4.15/installing/installing_aws/installing-aws-account.html#installing-aws-account",children:"https://docs.openshift.com/container-platform/4.15/installing/installing_aws/installing-aws-account.html#installing-aws-account"})]})}),"\n",(0,n.jsx)(t.h4,{id:"aws-role-permissions-checker",children:"AWS Role Permissions Checker"}),"\n",(0,n.jsx)(t.p,{children:"Bash script that can be run on linux or OS X. Requires AWS CLI to be installed and configured."}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsx)(t.p,{children:"Script user will need the following permissions:"}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["iam",":SimulatePrincipalPolicy"]}),"\n",(0,n.jsxs)(t.li,{children:["iam",":GetPolicy"]}),"\n",(0,n.jsxs)(t.li,{children:["iam",":GetPolicyVersion"]}),"\n"]})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(8450).Z+"",children:" Download the script "})}),"\n",(0,n.jsx)(t.p,{children:"Or run the following commands:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"wget https://github.com/ibm-client-engineering/solution-wxai-aws/assets/script/check-permissions.sh\nchmod +x check-permission.sh\n"})}),"\n",(0,n.jsxs)(t.p,{children:['To run the script you will need to download the "permissions.txt" file. ',(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.a,{href:"https://github.com/ibm-client-engineering/solution-wxai-aws/assets/script/permissions.txt",children:"Download permissions.txt "})]}),"\n",(0,n.jsx)(t.p,{children:"Script Syntax"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"./check-permissions.sh <ROLE> <PERMISSIONS FILE>\n"})}),"\n",(0,n.jsx)(t.p,{children:'The permissions file is long and will take a few minutes for the script to work through. The output from the script is a file named "missing_permissions.txt".'}),"\n",(0,n.jsx)(t.h3,{id:"required-aws-infrastructure-components",children:"Required AWS Infrastructure Components"}),"\n",(0,n.jsx)(t.p,{children:"To install OpenShift Container Platform on user-provisioned infrastructure in Amazon Web Services (AWS), you must manually create both the machines and their supporting infrastructure. For more information about the integration testing for different platforms, see the OpenShift Container Platform 4.x Tested Integrations page."}),"\n",(0,n.jsx)(t.p,{children:"By using the provided CloudFormation templates, you can create stacks of AWS resources that represent the following components:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"An AWS Virtual Private Cloud (VPC)"}),"\n",(0,n.jsx)(t.li,{children:"Networking and load balancing components"}),"\n",(0,n.jsx)(t.li,{children:"Security groups and roles"}),"\n",(0,n.jsx)(t.li,{children:"An OpenShift Container Platform bootstrap node"}),"\n",(0,n.jsx)(t.li,{children:"OpenShift Container Platform control plane nodes"}),"\n",(0,n.jsx)(t.li,{children:"An OpenShift Container Platform compute node"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Alternatively, you can manually create the components or you can reuse existing infrastructure that meets the cluster requirements. Review the CloudFormation templates for more details about how the components interrelate."}),"\n",(0,n.jsx)(t.p,{children:"Other infrastructure components:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"A VPC"}),"\n",(0,n.jsx)(t.li,{children:"DNS entries"}),"\n",(0,n.jsx)(t.li,{children:"Load balancers (classic or network) and listeners"}),"\n",(0,n.jsx)(t.li,{children:"A public and a private Route 53 zone"}),"\n",(0,n.jsx)(t.li,{children:"Security groups"}),"\n",(0,n.jsx)(t.li,{children:"IAM roles"}),"\n",(0,n.jsx)(t.li,{children:"S3 buckets"}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"required-vpc-components",children:"Required VPC Components"}),"\n",(0,n.jsx)(t.p,{children:"You must provide a suitable VPC and subnets that allow communication to your machines:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Component"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"AWS type"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"VPC"}),(0,n.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,n.jsx)(t.code,{children:"AWS::EC2::VPC"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::VPCEndpoint"})]}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"You must provide a public VPC for the cluster to use. The VPC uses an endpoint that references the route tables for each subnet to improve communication with the registry that is hosted in S3."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Public subnets"}),(0,n.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,n.jsx)(t.code,{children:"AWS::EC2::Subnet"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::SubnetNetworkAclAssociation"})]}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Your VPC must have public subnets for between 1 and 3 availability zones and associate them with appropriate Ingress rules."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Internet gateway"}),(0,n.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,n.jsx)(t.code,{children:"AWS::EC2::InternetGateway"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::VPCGatewayAttachment"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::RouteTable"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::Route"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::SubnetRouteTableAssociation"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::NatGateway"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::EIP"})]}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"You must have a public internet gateway, with public routes, attached  to the VPC. In the provided templates, each public subnet has a NAT gateway  with an EIP address. These NAT gateways allow cluster resources, like  private subnet instances, to reach the internet and are not required for  some restricted network or proxy scenarios."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Network access control"}),(0,n.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,n.jsx)(t.code,{children:"AWS::EC2::NetworkAcl"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::NetworkAclEntry"})]}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Required Ports: 80, 443, 22, 1024-65535, 0-65535"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Private subnets"}),(0,n.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,n.jsx)(t.code,{children:"AWS::EC2::Subnet"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::RouteTable"}),"      ",(0,n.jsx)(t.code,{children:"AWS::EC2::SubnetRouteTableAssociation"})]}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Your VPC can have private subnets. The provided CloudFormation templates can create private subnets for between 1 and 3 availability zones. If you use private subnets, you must provide appropriate routes and tables for them."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"required-dns-and-load-balancing-components",children:"Required DNS and load balancing components"}),"\n",(0,n.jsxs)(t.p,{children:["Your DNS and load balancer configuration needs to use a public hosted zone and can use a private hosted zone similar to the one that the installation program uses if it provisions the cluster\u2019s infrastructure. You must create a DNS entry that resolves to your load balancer. An entry for api.",(0,n.jsx)(t.code,{children:"cluster_name"}),".",(0,n.jsx)(t.code,{children:"domain"})," must point to the external load balancer, and an entry for api-int.",(0,n.jsx)(t.code,{children:"cluster_name"}),".",(0,n.jsx)(t.code,{children:"domain"})," must point to the internal load balancer."]}),"\n",(0,n.jsx)(t.p,{children:"The cluster also requires load balancers and listeners for port 6443, which are required for the Kubernetes API and its extensions, and port 22623, which are required for the Ignition config files for new machines. The targets will be the control plane nodes. Port 6443 must be accessible to both clients external to the cluster and nodes within the cluster. Port 22623 must be accessible to nodes within the cluster."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Component"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"AWS type"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"DNS"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::Route53::HostedZone"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"The hosted zone for your internal DNS."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Public load balancer"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::LoadBalancer"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"The load balancer for your public subnets."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"External API server record"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::Route53::RecordSetGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Alias records for the external API server."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"External listener"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::Listener"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"A listener on port 6443 for the external load balancer."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"External target group"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::TargetGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"The target group for the external load balancer."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Private load balancer"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::LoadBalancer"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"The load balancer for your private subnets."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Internal API server record"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::Route53::RecordSetGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Alias records for the internal API server."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Internal listener"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::Listener"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"A listener on port 22623 for the internal load balancer."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Internal target group"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::TargetGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"The target group for the internal load balancer."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Internal listener"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::Listener"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"A listener on port 6443 for the internal load balancer."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"Internal target group"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::ElasticLoadBalancingV2::TargetGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"The target group for the internal load balancer."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"required-security-groups",children:"Required Security groups"}),"\n",(0,n.jsx)(t.p,{children:"The control plane and worker machines require access to the following ports:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Group"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"IP Protocol"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Port range"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"MasterSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"icmp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"0"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"6443"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22623"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"WorkerSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"icmp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"0"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"BootstrapSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"19531"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"control-plane-ingress",children:"Control plane Ingress"}),"\n",(0,n.jsxs)(t.p,{children:["The control plane machines require the following Ingress groups. Each Ingress group is a ",(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroupIngress"})," resource."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Group"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"IP Protocol"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Port range"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"MasterSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"icmp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"0"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"6443"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22623"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"WorkerSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"icmp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"0"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"BootstrapSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"19531"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"worker-ingress",children:"Worker Ingress"}),"\n",(0,n.jsxs)(t.p,{children:["The worker machines require the following Ingress groups. Each Ingress group is a ",(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroupIngress"})," resource."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Group"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"IP Protocol"}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:"Port range"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"MasterSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"icmp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"0"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"6443"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22623"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"WorkerSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"icmp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"0"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"BootstrapSecurityGroup"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"AWS::EC2::SecurityGroup"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"22"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"}}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"tcp"}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"19531"})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"cluster-machines",children:"Cluster machines"}),"\n",(0,n.jsxs)(t.p,{children:["You need ",(0,n.jsx)(t.code,{children:"AWS::EC2::Instance"})," objects for the following machines:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"A bootstrap machine. This machine is required during installation, but you can remove it after your cluster deploys."}),"\n",(0,n.jsx)(t.li,{children:"Three control plane machines. The control plane machines are not governed by a control plane machine set."}),"\n",(0,n.jsx)(t.li,{children:"Compute machines. You must create at least two compute machines, which are also known as worker machines, during installation. These machines are not governed by a compute machine set."}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["For more information on OCP on AWS, see ",(0,n.jsx)(t.a,{href:"https://docs.openshift.com/container-platform/4.15/installing/installing_aws/installing-aws-user-infra.html",children:"https://docs.openshift.com/container-platform/4.15/installing/installing_aws/installing-aws-user-infra.html"}),'\nThe "Minimum requirements" section does not consider the watsonx.ai and related services, and is accounted for in this documentation']})})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8450:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s.p+"assets/files/check-permissions-1f656d12302f99a7e1032e1f17c14c80.sh"}}]);