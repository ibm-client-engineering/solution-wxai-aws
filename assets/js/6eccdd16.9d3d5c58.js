"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6705],{3170:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>a,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var t=r(5893),d=r(1151);const i={id:"architect",sidebar_position:1,title:"Architect",custom_edit_url:null},s="Architecture Requirements",l={id:"Prepare/architect",title:"Architect",description:"Architecture Decisions",source:"@site/docs/1-Prepare/1-Architect.mdx",sourceDirName:"1-Prepare",slug:"/Prepare/architect",permalink:"/solution-wxai-aws/Prepare/architect",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"architect",sidebar_position:1,title:"Architect",custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Prepare",permalink:"/solution-wxai-aws/category/prepare"},next:{title:"Prepare",permalink:"/solution-wxai-aws/Prepare"}},c={},h=[{value:"Architecture Decisions",id:"architecture-decisions",level:2},{value:"Bill of Materials",id:"bill-of-materials",level:2},{value:"AWS Requirements",id:"aws-requirements",level:3},{value:"Infrastructure",id:"infrastructure",level:4},{value:"Networking",id:"networking",level:4},{value:"Deployment in Action",id:"deployment-in-action",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"architecture-requirements",children:"Architecture Requirements"}),"\n",(0,t.jsx)("iframe",{width:"768",height:"432",src:"https://miro.com/app/embed/uXjVNtCvNTw=/?pres=1&frameId=3458764578922854387&embedId=518034396865",frameborder:"0",scrolling:"no",allow:"fullscreen; clipboard-read; clipboard-write",allowfullscreen:!0}),"\n",(0,t.jsx)(n.h2,{id:"architecture-decisions",children:"Architecture Decisions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"User managed Openshift in AWS"}),"\n",(0,t.jsxs)(n.li,{children:["Cloud Pak for Data with the following components","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"WatsonX.Assistant"}),"\n",(0,t.jsx)(n.li,{children:"Watson Discovery"}),"\n",(0,t.jsx)(n.li,{children:"OpenPages"}),"\n",(0,t.jsx)(n.li,{children:"watsonx.ai"}),"\n",(0,t.jsx)(n.li,{children:"Watson Studio"}),"\n",(0,t.jsx)(n.li,{children:"Watson Machine Learning"}),"\n",(0,t.jsx)(n.li,{children:"Watson Knowledge Catalog"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Foundational Models","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"mixtral"}),"\n",(0,t.jsx)(n.li,{children:"llama2"}),"\n",(0,t.jsx)(n.li,{children:"ibm-granite-chat-v2.1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Master"}),(0,t.jsx)(n.th,{children:"Worker"}),(0,t.jsx)(n.th,{children:"EFS Storage"}),(0,t.jsx)(n.th,{children:"GPU"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instance Type"}),(0,t.jsx)(n.td,{children:"m5.2xlarge"}),(0,t.jsx)(n.td,{children:"m6i.8xlarge"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"p4d.24xlarge"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instance vCPU"}),(0,t.jsx)(n.td,{children:"8"}),(0,t.jsx)(n.td,{children:"32"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"96"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instance GPU"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instance Memory"}),(0,t.jsx)(n.td,{children:"32 GiB"}),(0,t.jsx)(n.td,{children:"128 GiB"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"1152 GiB"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Quantity"}),(0,t.jsx)(n.td,{children:"3"}),(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instances Price"}),(0,t.jsx)(n.td,{children:"$13507.92"}),(0,t.jsx)(n.td,{children:"$58,376.64"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"$288226.78"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Provisioned IOPS"}),(0,t.jsx)(n.td,{children:"gp3"}),(0,t.jsx)(n.td,{children:"gp3"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"N/A"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Storage"}),(0,t.jsx)(n.td,{children:"300"}),(0,t.jsx)(n.td,{children:"300"}),(0,t.jsx)(n.td,{children:"1000"}),(0,t.jsx)(n.td,{children:"N/A"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Quantity"}),(0,t.jsx)(n.td,{children:"3"}),(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Storage Total Price"}),(0,t.jsx)(n.td,{children:"$864.000"}),(0,t.jsx)(n.td,{children:"$2,304.00"}),(0,t.jsx)(n.td,{children:"$80"}),(0,t.jsx)(n.td,{children:"N/A"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instance"}),(0,t.jsx)(n.td,{children:"3"}),(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"N/A"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Storage + IOPS Price"}),(0,t.jsx)(n.td,{children:"$864.000"}),(0,t.jsx)(n.td,{children:"$2304.000"}),(0,t.jsx)(n.td,{children:"$960.000"}),(0,t.jsx)(n.td,{children:"N/A"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AWS Infra total price"}),(0,t.jsx)(n.td,{children:"$14371.920"}),(0,t.jsx)(n.td,{children:"$60,680.64"}),(0,t.jsx)(n.td,{children:"$960.000"}),(0,t.jsx)(n.td,{children:"$288,226.776"})]})]})]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Annual Price"}),(0,t.jsx)(n.th,{children:"Monthly Price"}),(0,t.jsx)(n.th,{children:"Hourly Price"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$364239.336"}),(0,t.jsx)(n.td,{children:"$30,353.28"}),(0,t.jsx)(n.td,{children:"$41.58"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"aws-requirements",children:"AWS Requirements"}),"\n",(0,t.jsx)(n.h4,{id:"infrastructure",children:"Infrastructure"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Flavor"}),(0,t.jsx)(n.th,{children:"Count"}),(0,t.jsx)(n.th,{children:"vCPU"}),(0,t.jsx)(n.th,{children:"RAM"}),(0,t.jsx)(n.th,{children:"GPU Count"}),(0,t.jsx)(n.th,{children:"GPU RAM"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"m5.2xlarge"}),(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"48 (8 cores x Count)"}),(0,t.jsx)(n.td,{children:"192G (32G x Count)"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"m6i.8xlarge"}),(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"192 (32 cores x Count)"}),(0,t.jsx)(n.td,{children:"768G (128G x Count)"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"p4d.24xlarge"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"96"}),(0,t.jsx)(n.td,{children:"1152G"}),(0,t.jsx)(n.td,{children:"8"}),(0,t.jsx)(n.td,{children:"320G"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Totals"})}),(0,t.jsx)(n.td,{children:"13"}),(0,t.jsx)(n.td,{children:"336"}),(0,t.jsx)(n.td,{children:"2112G"}),(0,t.jsx)(n.td,{children:"8"}),(0,t.jsx)(n.td,{children:"320G"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"networking",children:"Networking"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"1x VPC"}),"\n",(0,t.jsx)(n.li,{children:"3x AZ"}),"\n",(0,t.jsx)(n.li,{children:"1x NLB"}),"\n",(0,t.jsx)(n.li,{children:"1x ALB"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deployment-in-action",children:"Deployment in Action"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CloudFormation Template"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The cloudformation template can be found ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(5014).Z+"",children:"here"})]}),"\n",(0,t.jsxs)(n.p,{children:["The following is an approximate diagram of how the CloudFormation template operates. It creates the IAM roles, VPC, Users, and a bootnode from which it deploys OCP and Cloud Pak for Data with ",(0,t.jsx)(n.code,{children:"cloud-pak-deployer"}),"."]}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TD\n\nsubgraph CloudForms\nCloudformStart\nend\n\nsubgraph AWSCredentialSecret\nCPDIAMUserAccessKey\nend\n\nsubgraph VPC\nAWSCredentialSecret["AWSCredentialSecret"]\nCPDIAMUser["CPDIAMUser"]\nBootNodeIamRole["BootNodeIamRole"]--\x3eBootnodeInstance\nBootnodeInstanceProfile["BootnodeInstanceProfile"]--\x3eBootnodeInstance\nBootnodeInstance--\x3eOpenShift\nend\n\n\n\nsubgraph BootnodeInstance\nCloudPakDeployer--\x3eOpenShift\nend\n\nsubgraph OpenShift\nCP4D--\x3ewxai\nend\n\nCloudformStart["Cloudforms kicks off build"]--\x3eVPC\n\nCPDIAMUserAccessKey["CPDIAMUserAccessKey"]--\x3eCPDIAMUser--\x3eBootnodeInstance\nBootnodeInstance["BootnodeInstance"]\n\nCP4D["CP4D"]--\x3ewxai\nwxai["watsonx.ai"]'}),"\n",(0,t.jsxs)(n.p,{children:["A variation of the cloudformation template that uses STS for auth can be found ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(8180).Z+"",children:"here"})]})]})}function a(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8180:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/files/cluster-sts-e7ca16c173180dfc350baba248f8f257.yml"},5014:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/files/cluster-3973ed3e8cf7d34756004b7edfb1cf21.yml"},1151:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>s});var t=r(7294);const d={},i=t.createContext(d);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);